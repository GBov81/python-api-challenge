# Import necessary libraries: pandas for data handling, requests for API requests, folium for map visualization.
import pandas as pd
import requests
import folium
import sys

# Load the city data from the CSV file.
city_data_df = pd.read_csv('https://raw.githubusercontent.com/GBov81/python-api-challenge/main/output_data/cities.csv')

# Create a map centered on a location (e.g., the first city in the DataFrame).
m = folium.Map(location=[city_data_df['Lat'].iloc[0], city_data_df['Lng'].iloc[0]], zoom_start=5)

# Add city points to the map based on humidity and display the map.
for index, row in city_data_df.iterrows():
    folium.CircleMarker(
        location=[row['Lat'], row['Lng']],
        radius=row['Humidity'] / 5,  # Adjust the size of the circle marker based on humidity.
        color='blue',
        fill=True,
        fill_color='blue',
        fill_opacity=0.6,
        popup=f"City: {row['City']}<br>Humidity: {row['Humidity']}%"
    ).add_to(m)
m
